
<div class='container'>

  <%# SEARCH-BAR %>
  <div class='search'>
    <%= simple_form_for root_path, method: :get do |f| %>
      <div class="search-form-control form-group">
        <%= text_field_tag :query, params[:query], value: params[:query],class: "form-control string required", placeholder: "Trouver des topos" %>
        <button name="button" type="submit" class="btn btn-flat">
          <i class="fas fa-search"></i>
        </button>
      </div>
    <% end %>
    <% if @topos.count == 0 %>
      <h4 id='search-message'>D√©sol√© nous ne trouvons aucun topo pour toi ü§¶üèª‚Äç‚ôÇÔ∏è</h4>
    <% else %>
      <h4>(<%= @topos.count %>) <%= @topos.count <= 1 ? 'Topo' : 'Topos' %></h4>
    <% end %>
  </div>

  <%# LIST TOPOS %>
  <div class="card-container">
    <% @topos.each do |topo| %>
      <%= link_to topo_path(topo), class: 'card-product' do %>
        <%= image_tag "https://images.unsplash.com/photo-1437482078695-73f5ca6c96e2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80" %>
        <div class='card-infos'>
          <div class='infos-name'>
            <div class='naming-div'>
              <h4><%= "#{topo.river.name.capitalize} #{topo.name.capitalize}" %></h4>
              <h4 class='topo-level'><%= topo.find_level.count > 1 ? "#{topo.find_level[0]} - #{topo.find_level[1]}" : "#{topo.find_level[0]}" %></h4>
            </div>
          </div>
          <div class='country-div'>
            <i><svg xmlns="http://www.w3.org/2000/svg" width="27" height="18"><rect width="27" height="18" fill="#ED2939"/><rect width="18" height="18" fill="#fff"/><rect width="9" height="18" fill="#002395"/></svg></i>
            <p><%= topo.river.department %></p>
          </div>
          <div class="alert-div">
            <div class="alert-icons">
              <% if topo.has_alert? %>
                <div class="alert-level <%= topo.has_severity_2_alert? ? 'severity2' : '' %>"><i class="fas fa-exclamation-triangle"></i></div>
              <% end %>
              <div class="circle <%= topo.river.safe? ? 'safe' : 'unsafe' %>"></div>
            </div>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
